library("cowplot") # for ggdraw, add_sub and plot_grid
library("stringr") # for str_sub
library("tsibble") # for as_tsibble
library("imputeTS") # for na_interpolation
library("broom")
tkplot
library("tkrplot")
tkplot
tkplot.getcoords
tkplot
layout_with_kk
tkplot()
## --------
library("tkrplot") tkplot()
## --------
library("tkrplot") tkplot()
library("tkrplot")
tkplot()
tkplot
library("readr")
library("igraph")
library("cartography")
library("visNetwork")
library("tkrplot")
tkplot
knitr::opts_chunk$set(echo = TRUE)
update.packages(ask = FALSE, checkBuilt = TRUE)
tinytex::reinstall_tinytex()
knitr::opts_chunk$set(echo = TRUE)
tinytex:::is_tinytex()
install.packages(c("rlang", "xfun"))
install.packages(c("rlang", "xfun"))
install.packages(c("rlang", "xfun"))
install.packages(c("rlang", "xfun"))
install.packages(c("rlang", "xfun"))
install.packages(c("rlang", "xfun"))
install.packages(c("rlang", "xfun"))
install.packages("rlang")
knitr::opts_chunk$set(echo = TRUE)
detach(rlang)
install.packages(c("rlang", "xfun"))
knitr::opts_chunk$set(echo = TRUE)
file.edit(file.path("~", ".Rprofile"))
install.packages("rlang")
install.packages("xfun")
install.packages("Rcpp")
knitr::opts_chunk$set(echo = TRUE)
# webshot::install_phantomjs()
library(Rcpp)
# webshot::install_phantomjs()
library(Rcpp)
setwd("~/ai-and-society")
library(eulerr)
# Figure 1
# AI and Society
# R Script by Marion Maisonobe. Script last update: 2020-01-26
# To generate nice charts
library(eulerr)
fit <- euler(c("A" = 4, "B" = 6, "C" = 3, "D" = 2, "E" = 7, "F" = 3,
"A&B" = 2, "A&F" = 2, "B&C" = 2, "B&D" = 1,
"B&F" = 2, "C&D" = 1, "D&E" = 1, "E&F" = 1,
"A&B&F" = 1, "B&C&D" = 1),
shape = "ellipse")
plot(fit)
# eulerr.co()
intersections <- euler(c("A" = 426386, "B" = 313866, "C" = 83741,
"A&B" = 59541, "A&C" = 10871, "B&C" = 5494,
"A&B&C" = 2137))
euler()
eulerr_options()
# opar <- par()
plot.new()
svg(filename = "outputs/figures/Figure_1.svg",
width = 10,
height = 9)
par(oma=c(4,4,0,4))
par(mar=c(10,12,4.1,12) + 0.3)
plot.new()
# par(mar = c(0,0,0,0))
plot(intersections,
labels = list(labels = c("Machine Learning\n426,386 records", "Artificial Intelligence\n313,866 records", "Big Data\n83,741 records"),
col = c("darkgreen", "darkblue", "darkorange"),
cex = 1.5, font = 2),
edges = NA,
fills = list(fill = c("lightgreen", "steelblue4", "orange"), alpha = 0.5),
main = "")
# main = list(label = "", cex.main = 0.2, font.main = 2))
title(main = ("Overlap between Big Data,\nArtificial Intelligence and Machine Learning publications"), line = 1,  cex.main = 1.5, font.main = 2) #line = 2.5
mtext("Based on lexical queries made in the Web of Science Core Collection database", side = 1, line = 2, cex = 1.5, outer = T) # line = 4.7
mtext("MM, 2021-10-01. Designed with the R package Eulerr", side = 4, cex = 1, line = 3, outer = T, adj = 1, font = 3, col = "grey")
dev.off()
# Figure 2
# AI and Society
# R Script by Marion Maisonobe. Script last update: 2020-01-26
# To generate nice charts
library(readr)
library(tidyverse)
####
read_dico <- function(cat) {
read_delim(paste0("data/", cat, "/dico.txt"), ", ", col_names = F)
}
dico <- c("transportation", "water_resources") %>%
map_df(~read_dico(.))
read_plus <- function(flnm) {
read_delim(flnm, delim = "\t") %>%
drop_na() %>%
mutate(year = `Publication Years`) %>%
select(year, records) %>%
mutate(var = flnm) %>%
mutate(var = str_extract(var, pattern = "\\w_\\d")) %>%
left_join(dico, by = c("var" = "X1"))  %>%
mutate(cat = str_extract(X2, "\\w+"))%>%
mutate(var_u = str_extract(var, pattern = "_\\d")) #
}
cat <- c("transportation", "water_resources")
tbl <-
list.files(path = paste0("./data/", cat, "/"),
pattern = "*\\w_",
full.names = T) %>%
map_df(~read_plus(.))
colors <- c("#B2B2B2", "#9999FF", "#FF8080", "#99CC99")
plot_fig2 <- ggplot(tbl, aes(x = as.Date(year, format = "%Y"), y = records, group = var_u)) +
geom_line(aes(color = var_u)) + # , lwd = 0.8) +
geom_point(aes(color = var_u)) +
facet_wrap(~ cat) +
theme_light() +
xlab("Publication years up until 2018") + ylab("Number of publications") +
scale_x_date(limits = as.Date(c("1980-01-01","2019-01-01"), format = "%Y"), expand = c(0, 80),
breaks = seq(as.Date("1981-01-01"), as.Date("2019-01-01"), by = "4 years"), # breaks = date_breaks("2 years"),
labels = date_format("%Y")) +
ggtitle("Growth of Big Data, AI and other Machine Learning publications in Transportation and Water Resources titles") +
scale_color_manual(values = colors, labels = c("Logic-Based AI", "Connexionnist AI",
"Big Data", "Machine Learning, else")) + # , name = "Variables",
theme(plot.title = element_text(size = 11), #face = "bold",
plot.subtitle = element_text(face = "italic"),
axis.text.x = element_text(angle = 40),
panel.grid.major.x = element_blank(),
strip.background = element_rect(fill = "cadetblue4", color = "cadetblue4"),
# strip.text = element_text(colour = 'black'),
legend.position = "bottom", # c(0.25, 0.75)
# legend.box = "vertical",
legend.background = element_rect(fill = NA), #colour = "grey80"
legend.title = element_blank()
) ##
svg(paste("outputs/figures/Figure_2.svg"), width = 8, height = 4)
plot.new()
ggdraw(add_sub(plot_fig2, fontface = "italic", size = 8, color = "black", x = 0, y = 0.5, hjust = 0, vjust = 0.5, fontfamily = "sans", lineheight = 1,
label =
"Indexes:  SCI-EXPANDED, SSCI, A&HCI, CPCI-S, CPCI-SSH, ESCI. Web of Science Core Collection. MM, 2021-01-11" #\n
))
dev.off()
tbl <- tbl %>%
rename(label = X2)
write_tsv(tbl, "outputs/tables/data_figure_2.tsv")
# Figure 2
# AI and Society
# R Script by Marion Maisonobe. Script last update: 2020-01-26
# To generate nice charts
library(readr)
library(tidyverse)
library(scales)
####
read_dico <- function(cat) {
read_delim(paste0("data/", cat, "/dico.txt"), ", ", col_names = F)
}
dico <- c("transportation", "water_resources") %>%
map_df(~read_dico(.))
read_plus <- function(flnm) {
read_delim(flnm, delim = "\t") %>%
drop_na() %>%
mutate(year = `Publication Years`) %>%
select(year, records) %>%
mutate(var = flnm) %>%
mutate(var = str_extract(var, pattern = "\\w_\\d")) %>%
left_join(dico, by = c("var" = "X1"))  %>%
mutate(cat = str_extract(X2, "\\w+"))%>%
mutate(var_u = str_extract(var, pattern = "_\\d")) #
}
cat <- c("transportation", "water_resources")
tbl <-
list.files(path = paste0("./data/", cat, "/"),
pattern = "*\\w_",
full.names = T) %>%
map_df(~read_plus(.))
colors <- c("#B2B2B2", "#9999FF", "#FF8080", "#99CC99")
plot_fig2 <- ggplot(tbl, aes(x = as.Date(year, format = "%Y"), y = records, group = var_u)) +
geom_line(aes(color = var_u)) + # , lwd = 0.8) +
geom_point(aes(color = var_u)) +
facet_wrap(~ cat) +
theme_light() +
xlab("Publication years up until 2018") + ylab("Number of publications") +
scale_x_date(limits = as.Date(c("1980-01-01","2019-01-01"), format = "%Y"), expand = c(0, 80),
breaks = seq(as.Date("1981-01-01"), as.Date("2019-01-01"), by = "4 years"), # breaks = date_breaks("2 years"),
labels = date_format("%Y")) +
ggtitle("Growth of Big Data, AI and other Machine Learning publications in Transportation and Water Resources titles") +
scale_color_manual(values = colors, labels = c("Logic-Based AI", "Connexionnist AI",
"Big Data", "Machine Learning, else")) + # , name = "Variables",
theme(plot.title = element_text(size = 11), #face = "bold",
plot.subtitle = element_text(face = "italic"),
axis.text.x = element_text(angle = 40),
panel.grid.major.x = element_blank(),
strip.background = element_rect(fill = "cadetblue4", color = "cadetblue4"),
# strip.text = element_text(colour = 'black'),
legend.position = "bottom", # c(0.25, 0.75)
# legend.box = "vertical",
legend.background = element_rect(fill = NA), #colour = "grey80"
legend.title = element_blank()
) ##
svg(paste("outputs/figures/Figure_2.svg"), width = 8, height = 4)
plot.new()
ggdraw(add_sub(plot_fig2, fontface = "italic", size = 8, color = "black", x = 0, y = 0.5, hjust = 0, vjust = 0.5, fontfamily = "sans", lineheight = 1,
label =
"Indexes:  SCI-EXPANDED, SSCI, A&HCI, CPCI-S, CPCI-SSH, ESCI. Web of Science Core Collection. MM, 2021-01-11" #\n
))
dev.off()
tbl <- tbl %>%
rename(label = X2)
write_tsv(tbl, "outputs/tables/data_figure_2.tsv")
library(readr)
library(tidyverse)
library(scales)
library(cowplot)
####
read_dico <- function(cat) {
read_delim(paste0("data/", cat, "/dico.txt"), ", ", col_names = F)
}
dico <- c("transportation", "water_resources") %>%
map_df(~read_dico(.))
read_plus <- function(flnm) {
read_delim(flnm, delim = "\t") %>%
drop_na() %>%
mutate(year = `Publication Years`) %>%
select(year, records) %>%
mutate(var = flnm) %>%
mutate(var = str_extract(var, pattern = "\\w_\\d")) %>%
left_join(dico, by = c("var" = "X1"))  %>%
mutate(cat = str_extract(X2, "\\w+"))%>%
mutate(var_u = str_extract(var, pattern = "_\\d")) #
}
cat <- c("transportation", "water_resources")
tbl <-
list.files(path = paste0("./data/", cat, "/"),
pattern = "*\\w_",
full.names = T) %>%
map_df(~read_plus(.))
colors <- c("#B2B2B2", "#9999FF", "#FF8080", "#99CC99")
plot_fig2 <- ggplot(tbl, aes(x = as.Date(year, format = "%Y"), y = records, group = var_u)) +
geom_line(aes(color = var_u)) + # , lwd = 0.8) +
geom_point(aes(color = var_u)) +
facet_wrap(~ cat) +
theme_light() +
xlab("Publication years up until 2018") + ylab("Number of publications") +
scale_x_date(limits = as.Date(c("1980-01-01","2019-01-01"), format = "%Y"), expand = c(0, 80),
breaks = seq(as.Date("1981-01-01"), as.Date("2019-01-01"), by = "4 years"), # breaks = date_breaks("2 years"),
labels = date_format("%Y")) +
ggtitle("Growth of Big Data, AI and other Machine Learning publications in Transportation and Water Resources titles") +
scale_color_manual(values = colors, labels = c("Logic-Based AI", "Connexionnist AI",
"Big Data", "Machine Learning, else")) + # , name = "Variables",
theme(plot.title = element_text(size = 11), #face = "bold",
plot.subtitle = element_text(face = "italic"),
axis.text.x = element_text(angle = 40),
panel.grid.major.x = element_blank(),
strip.background = element_rect(fill = "cadetblue4", color = "cadetblue4"),
# strip.text = element_text(colour = 'black'),
legend.position = "bottom", # c(0.25, 0.75)
# legend.box = "vertical",
legend.background = element_rect(fill = NA), #colour = "grey80"
legend.title = element_blank()
) ##
svg(paste("outputs/figures/Figure_2.svg"), width = 8, height = 4)
plot.new()
ggdraw(add_sub(plot_fig2, fontface = "italic", size = 8, color = "black", x = 0, y = 0.5, hjust = 0, vjust = 0.5, fontfamily = "sans", lineheight = 1,
label =
"Indexes:  SCI-EXPANDED, SSCI, A&HCI, CPCI-S, CPCI-SSH, ESCI. Web of Science Core Collection. MM, 2021-01-11" #\n
))
dev.off()
tbl <- tbl %>%
rename(label = X2)
write_tsv(tbl, "outputs/tables/data_figure_2.tsv")
# Figure 3
# AI and Society
# R Script by Marion Maisonobe. Script last update: 2020-01-26
# To generate nice charts
library(readr)
library(tidyverse)
library(scales)
library(cowplot)
####
read_plus <- function(flnm) {
read_delim(flnm, delim = "\t") %>%
drop_na() %>%
mutate(year = `Publication Years`) %>%
select(year, records) %>%
mutate(var = flnm) %>%
mutate(var = str_extract(var, pattern = "\\w+(?=_PY)"))
}
cat <- c("traffic", "water_quality")
tbl <-
list.files(path = paste0("./data/", cat, "/"),
pattern = "*\\w_PY",
full.names = T) %>%
map_df(~read_plus(.))
colors <- c("#CC9900", "#3465A4")
plot_fig3 <- ggplot(tbl, aes(x = as.Date(year, format = "%Y"), y = records, group = var)) +
geom_line(aes(color = var)) + # , lwd = 0.8) +
geom_point(aes(color = var)) +
theme_light() +
xlab("Publication years up until 2018") + ylab("Number of publications") +
scale_x_date(limits = as.Date(c("1961-01-01","2019-01-01"), format = "%Y"), expand = c(0, 80),
breaks = seq(as.Date("1961-01-01"), as.Date("2019-01-01"), by = "4 years"), # breaks = date_breaks("2 years"), ##
labels = date_format("%Y")) +
ggtitle("Annual number of publications about traffic flow and water quality") +
scale_color_manual(values = colors, labels = c("Traffic flow studies", "Water quality studies")) + # , name = "Variables",
theme(plot.title = element_text(size = 11), #face = "bold",
plot.subtitle = element_text(face = "italic"),
axis.text.x = element_text(angle = 40),
panel.grid.major.x = element_blank(),
strip.background = element_rect(fill = "cadetblue4", color = "cadetblue4"),
# strip.text = element_text(colour = 'black'),
legend.position = "bottom", # c(0.25, 0.75)
# legend.box = "vertical",
legend.background = element_rect(fill = NA), #colour = "grey80"
legend.title = element_blank()
) ##
svg(paste("outputs/figures/Figure_3.svg"), width = 8, height = 4)
plot.new()
ggdraw(add_sub(plot_fig3, fontface = "italic", size = 8, color = "black", x = 0, y = 0.5, hjust = 0, vjust = 0.5, fontfamily = "sans", lineheight = 1,
label =
"Indexes:  SCI-EXPANDED, SSCI, A&HCI, CPCI-S, CPCI-SSH, ESCI. Web of Science Core Collection. MM, 2021-01-11" #\n
))
dev.off()
write_tsv(tbl, "outputs/tables/data_figure_3.tsv")
# Figure 4
# AI and Society
# R Script by Marion Maisonobe. Script last update: 2020-01-26
# To generate nice charts
library(readr)
library(tidyverse)
library(scales)
library(cowplot)
####
read_dico <- function(cat) {
read_delim(paste0("data/", cat, "/dico.txt"), ", ", col_names = F)
}
dico <- c("traffic", "water_quality") %>%
map_df(~read_dico(.))
read_plus <- function(flnm) {
read_delim(flnm, delim = "\t") %>%
drop_na() %>%
mutate(year = `Publication Years`) %>%
select(year, records) %>%
mutate(var = flnm) %>%
mutate(var = str_extract(var, pattern = "\\w+_\\d")) %>%
left_join(dico, by = c("var" = "X1"))  %>%
mutate(cat = str_extract(X2, "(?<=^\\s).+(?=&)"))%>% # \\S+\\s\\S+
mutate(var_u = str_extract(var, pattern = "_\\d")) #
}
cat <- c("traffic", "water_quality")
tbl <-
list.files(path = paste0("./data/", cat, "/"),
pattern = "*\\w_\\d.",
full.names = T) %>%
map_df(~read_plus(.))
colors <- c("#B2B2B2", "#9999FF", "#FF8080", "#99CC99")
plot_fig4 <- ggplot(tbl, aes(x = as.Date(year, format = "%Y"), y = records, group = var_u)) +
geom_line(aes(color = var_u)) + # , lwd = 0.8) +
geom_point(aes(color = var_u)) +
facet_wrap(~ cat) +
theme_light() +
xlab("Publication years up until 2018") + ylab("Number of publications") +
scale_x_date(limits = as.Date(c("1992-01-01","2019-01-01"), format = "%Y"), expand = c(0, 80),
breaks = seq(as.Date("1992-01-01"), as.Date("2019-01-01"), by = "4 years"), # breaks = date_breaks("2 years"),
labels = date_format("%Y")) +
ggtitle("Growth of Big Data, AI and other Machine Learning publications in Traffic Flow and Water Quality studies") +
scale_color_manual(values = colors, labels = c("Logic-Based AI", "Connexionnist AI",
"Big Data", "Machine Learning, else")) + # , name = "Variables",
theme(plot.title = element_text(size = 11), #face = "bold",
plot.subtitle = element_text(face = "italic"),
axis.text.x = element_text(angle = 40),
panel.grid.major.x = element_blank(),
strip.background = element_rect(fill = "cadetblue4", color = "cadetblue4"),
# strip.text = element_text(colour = 'black'),
legend.position = "bottom", # c(0.25, 0.75)
# legend.box = "vertical",
legend.background = element_rect(fill = NA), #colour = "grey80"
legend.title = element_blank()
) ##
svg(paste("outputs/figures/Figure_4.svg"), width = 8, height = 4)
plot.new()
ggdraw(add_sub(plot_fig4, fontface = "italic", size = 8, color = "black", x = 0, y = 0.5, hjust = 0, vjust = 0.5, fontfamily = "sans", lineheight = 1,
label =
"Indexes:  SCI-EXPANDED, SSCI, A&HCI, CPCI-S, CPCI-SSH, ESCI. Web of Science Core Collection. MM, 2021-01-11" #\n
))
dev.off()
tbl <- tbl %>%
rename(label = X2)
write_tsv(tbl, "outputs/tables/data_figure_4.tsv")
# Figure 5
# AI and Society
# R Script by Marion Maisonobe. Script last update: 2020-01-26
# To generate nice charts
library(readr)
library(tidyverse)
library(scales)
library(cowplot)
####
####
read_plus <- function(flnm) {
read_delim(flnm, delim = "\t") %>%
drop_na() %>%
mutate(year = `Publication Years`) %>%
select(year, records) %>%
mutate(flnm = flnm) %>%
mutate(var = str_extract(flnm, pattern = "(?<=res_area/).+(?=.txt)")) %>%
mutate(cat = str_extract(flnm, "(?<=data/).+(?=/res_area)")) # \\S+\\s\\S+
}
cat <- c("traffic", "water_quality")
tbl <-
list.files(path = paste0("./data/", cat, "/res_area/"),
full.names = T) %>%
map_df(~read_plus(.))
colors <- c("#00CCCC", "#999999", "#009933")
# You can supply functions operating on strings:
catform <- function(string) {
str_replace(string, "_", " ") %>%
str_to_title()
}
plot_fig5 <- ggplot(tbl, aes(x = as.Date(year, format = "%Y"), y = records, group = var)) +
geom_line(aes(color = var)) + # , lwd = 0.8) +
geom_point(aes(color = var)) +
facet_wrap(~ cat, labeller = labeller(cat = catform))+
theme_light() +
xlab("Publication years up until 2018") + ylab("Number of publications") +
scale_x_date(limits = as.Date(c("1991-01-01","2019-01-01"), format = "%Y"), expand = c(0, 80),
breaks = seq(as.Date("1992-01-01"), as.Date("2018-01-01"), by = "4 years"), # breaks = date_breaks("2 years"),
labels = date_format("%Y")) +
ggtitle("Publications about Traffic Flow and Water Quality in Computer Science, Mathematics, and Physics titles") +
scale_color_manual(values = colors, labels = c("Computer Science", "Mathematics",
"Physics")) + # , name = "Variables",
theme(plot.title = element_text(size = 11), #face = "bold",
plot.subtitle = element_text(face = "italic"),
axis.text.x = element_text(angle = 40),
panel.grid.major.x = element_blank(),
strip.background = element_rect(fill = "cadetblue4", color = "cadetblue4"),
# strip.text = element_text(colour = 'black'),
legend.position = "bottom", # c(0.25, 0.75),
# legend.box = "vertical",
legend.background = element_rect(fill = NA), #colour = "grey80"
legend.title = element_blank()
) ##
svg(paste("outputs/figures/Figure_5.svg"), width = 8, height = 4)
plot.new()
ggdraw(add_sub(plot_fig5, fontface = "italic", size = 8, color = "black", x = 0, y = 0.5, hjust = 0, vjust = 0.5, fontfamily = "sans", lineheight = 1,
label =
"Indexes:  SCI-EXPANDED, SSCI, A&HCI, CPCI-S, CPCI-SSH, ESCI. Web of Science Core Collection. MM, 2021-01-12" #\n
))
dev.off()
write_tsv(tbl, "outputs/tables/data_figure_5.tsv")
# Figure 6
# AI and Society
# R Script by Marion Maisonobe. Script last update: 2020-01-26
# To generate nice charts
library(readr)
library(tidyverse)
library(scales)
library(cowplot)
####
read_plus <- function(flnm) {
read_delim(flnm, delim = "\t") %>%
drop_na() %>%
mutate(year = `Publication Years`) %>%
select(year, records) %>%
mutate(var = flnm) %>%
mutate(var = str_extract(var, pattern = "(?<=sources/).+(?=.txt)"))%>%
mutate(var = recode(var, Transportation_Research_B = "Tr. Res. B",
Transportation_Research_C = "Tr. Res. C"))
}
cat <- c("traffic", "water_quality")
tbl <-
list.files(path = paste0("./data/", cat, "/sources/"),
full.names = T) %>%
map_df(~read_plus(.))
colors <- c("#3465A4", "#66CC99")
plot_fig6 <- ggplot(tbl, aes(x = as.Date(year, format = "%Y"), y = records, group = var)) +
geom_line(aes(color = var)) + # , lwd = 0.8) +
geom_point(aes(color = var)) +
theme_light() +
xlab("Publication years up until 2018") + ylab("Number of publications") +
scale_x_date(limits = as.Date(c("1991-01-01","2019-01-01"), format = "%Y"), expand = c(0, 80),
breaks = seq(as.Date("1991-01-01"), as.Date("2019-01-01"), by = "4 years"), # breaks = date_breaks("2 years"), #
labels = date_format("%Y")) +
ggtitle("Traffic Flow studies in Transportation Research journals") +
scale_color_manual(values = colors, labels = c("Tr. Res. B", "Tr. Res. C")) + # , name = "Variables",
theme(plot.title = element_text(size = 11), #face = "bold",
plot.subtitle = element_text(face = "italic"),
axis.text.x = element_text(angle = 40),
panel.grid.major.x = element_blank(),
strip.background = element_rect(fill = "cadetblue4", color = "cadetblue4"),
# strip.text = element_text(colour = 'black'),
legend.position =  "bottom", #c(0.25, 0.75),
# legend.box = "vertical",
legend.background = element_rect(fill = NA), #colour = "grey80"
legend.title = element_blank()
) ##
svg(paste("outputs/figures/Figure_6.svg"), width = 6, height = 4)
plot.new()
ggdraw(add_sub(plot_fig6, fontface = "italic", size = 8, color = "black", x = 0, y = 0.5, hjust = 0, vjust = 0.5, fontfamily = "sans", lineheight = 1,
label =
"Indexes:  SCI-EXPANDED, SSCI, A&HCI, CPCI-S, CPCI-SSH, ESCI. Web of Science Core Collection. MM, 2021-01-12" #\n
))
dev.off()
write_tsv(tbl, "outputs/tables/data_figure_6.tsv")
